<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Course</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="hero">
            <h1>Premium Course</h1>
            <p class="subtitle">Learn the essentials</p>
        </header>

        <main class="product-section">
            <div class="product-card">
                <div class="product-image">
                    <div class="placeholder-image">
                        <span>ðŸ“š</span>
                    </div>
                </div>
                
                <h2 id="product-name">Loading...</h2>
                <p id="product-description"></p>
                
                <div class="pricing">
                    <div class="price">
                        <span class="current-price" id="product-price">Loading...</span>
                    </div>
                </div>
                
                <button id="continue-btn" class="checkout-btn" disabled>
                    <span class="btn-text">Continue</span>
                    <span class="loader" style="display: none;">Loading...</span>
                </button>
                
                <div class="guarantee">
                    <p>30-Day Money Back Guarantee</p>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
    <script>
        // Configuration
        const API_URL = window.location.hostname === 'localhost' 
            ? 'http://localhost:3000' 
            : ''; // Empty string for relative URLs in production
        
        const MAIN_PRODUCT_ID = 'prod_SYt7f28o0ZyHn2';
        
        document.addEventListener('DOMContentLoaded', async function() {
            await loadProduct();
            initializeContinue();
        });
        
        async function loadProduct() {
            try {
                setButtonLoading(document.getElementById('continue-btn'), true);
                
                const response = await fetch(`${API_URL}/api/get-product?product_id=${MAIN_PRODUCT_ID}`);
                const data = await response.json();
                
                if (data.error) {
                    alert('Error loading product: ' + data.error);
                    return;
                }
                
                productData = data;
                
                // Update UI with product data
                document.getElementById('product-name').textContent = data.product.name;
                document.getElementById('product-description').textContent = data.product.description || '';
                document.getElementById('product-price').textContent = data.price.formatted;
                
                document.getElementById('continue-btn').disabled = false;
                setButtonLoading(document.getElementById('continue-btn'), false);
                
            } catch (error) {
                console.error('Error loading product:', error);
                alert('Failed to load product. Please try again.');
            }
        }
        
        function initializeContinue() {
            const continueBtn = document.getElementById('continue-btn');
            
            continueBtn.addEventListener('click', function() {
                // Store product data for checkout page
                localStorage.setItem('mainProduct', JSON.stringify(productData));
                window.location.href = 'checkout.html';
            });
        }
    </script>
</body>
</html> 